### 쿠키 사용 로그인

###### 로그인 작동 순서

1. 클라이언트 로그인 요청
2. 회원 검증 -> 검증 통과 못하면 home으로 redirect 하거나 별도 처리
3. 서버에서 쿠키 만들어서 응답 (ex. memberId = 1)
4. 클라이언트 다음 요청부터 쿠키 담아서 요청
5. 서버에서 클라이언트 요청의 쿠키 정보 확인해서 로그인 유지 가능



######  문제점

- 쿠키를 탈취 당하면 클라이언트의 중요한 정보가 유출될 수 있음.  -> 고객 정보가 포함되지 않은 값을 쿠키에서 가져야 함.

- 한 번 탈취당하면 영원히 탈취 당하는 문제 발생 -> 만료 시간을 설정해서 일정 시간 경과 후에 사용할 수 없도록 해야함.



### 세션 사용 로그인

###### 로그인 작동 순서

1. 클라이언트 로그인 요청
2. 회원 검증
3. 회원 검증 통과하면 세션 생성하거나 조회해서 데이터 저장
4. 쿠키에 세션 ID랑 고객 정보가 포함되지 않은 값 담아서 반환
5. 클라이언트는 다음 요청부터 반환 받은 쿠키 전달
6. 서버에서 클라이언트 요청의 쿠키 정보 확인해서 세션 조회
7. 세션에 저장된 고객 정보 응답



###### 세션 타임 아웃 설정

세션은 사용자가 로그아웃을 직접 호출해서  `session.invalidate()`가 호출되는 경우에 삭제된다. 하지만, 보통 사용자들은 로그아웃을 선택하지 않고, 웹 브라우저를 종료한다. HTTP 서버는 비연결성이므로 서버 입장에서는 사용자가 웹 브라우저를 종료한 것인지 아닌지를 알 수 없다.

따라서, 서버에서 세션 데이터를 언제 삭제해야 하는지 판단하기 어려움.



###### 세션 종료 시점

세션 유지 기간이 30분이 적당하다고 생각해서 세션 생성 시점으로부터 30분으로 설정했다고 가정하자. 이 경우 30분이 지나면 세션이 삭제되기 때문에, 30분 이상 사이트를 이용하는 유저는 30분 마다 로그인을 해야한다.

따라서, 사용자가 서버에 최근 요청한 시간을 기준으로 30분 정도로 유지한다면 더 나은 대안이 될 것이다. 사용자가 서비스를 사용하고 있다면, 세션 생존 시간이 요청 시점으로부터 30분 이후로 계속 갱신될 것이다. 이렇게 하면 30분 마다 로그인하는 번거로움이 사라진다.

`HttpSession`은 이 방식을 사용한다.